# 可用性与可靠性

AnalyticDB PostgreSQL版通过主备多副本和磁盘三副本来保证数据可靠性。异常时自动切换节点，宕机时自恢复来保证极致的可用性，还可以通过备份恢复来进行数据恢复。

## 主备多副本与云盘三副本

AnalyticDB PostgreSQL版是基于MPP架构的分布式数据库，对于所有的分布式系统来说，在通过分布式来增强性能的同时，也带来了节点故障率增高的问题，通常分布式系统会通过多副本的方式来保证系统在某些节点异常情况下仍然可以正常提供服务。AnalyticDB PostgreSQL版是双副本架构，只要有一个副本集的计算节点是可用的，就可以保证实例正常提供服务。并且，在主备双副本的基础上。为了保证数据的可靠性，对于公共云场景，AnalyticDB PostgreSQL版还基于云盘做了数据三副本，每一份数据都会冗余三份打散存储，进一步保证数据不丢失，而对于混合云场景，则通过物理机磁盘做RAID阵列的方式做数据冗余，达到相同的效果。

AnalyticDB PostgreSQL版的主备多副本可以实现跨可用区、跨域部署，通过这种异地多中心的部署方式，实现跨机房容灾。

## 异常自动节点切换与宕机自恢复

AnalyticDB PostgreSQL版会实时不断地探测实例节点的健康状态，如果出现主计算节点异常，则会使用热备节点替换异常节点，保证实例的可用性。并且对于异常节点，AnalyticDB PostgreSQL版会根据不同的异常场景来对进行主动自恢复，保证实例一直处于多副本状态，比如，如果有计算节点所在的物理机异常，则会自动将这些节点自动迁移到新的机器上去。而如果计算节点所在机器无异常，而进程宕掉的情况，则会原地拉起进程。

## 备份恢复

在某些极端异常的场景，比如整个机房出现故障或者用户数据误删，导致数据丢失，AnalyticDB PostgreSQL版仍然可以通过远端数据备份的方式恢复集群，提供服务，为极端场景或者用户数据误删情况下提供进一步的数据恢复手段。AnalyticDB PostgreSQL版目前支持全量逻辑备份恢复，并且即将支持增量备份恢复功能，增量备份其相较于全量逻辑备份不会持有锁，对用户影响非常小。同时可以实现实例、库、Schema等不同级别的数据恢复。

