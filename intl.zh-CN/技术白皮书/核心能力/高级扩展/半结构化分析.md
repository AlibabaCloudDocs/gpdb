# 半结构化分析

## JSON/JSONB

AnalyticDB PostgreSQL版支持JSON数据格式。JSON格式数据在业务上也可以用text类型来存储，但是使用JSON/JSONB数据类型会在用户写入数据时对输入做JSON规则校验，避免不合法JSON数据写入。同时AnalyticDB PostgreSQL版提供一些列特定的JSON化函数，让用户可以对这些数据作出一些业务所需的操作。

支持的JSON数据类型有两种：JSON和JSONB。这两种类型在使用上几乎完全一致。

其中，JSON数据类型直接存储输入文本，会保存JSON数据中语义无关的空格，并且会保持JSON对象键的顺序，以及JSON数据中重复的键和键对应的数据。对于重复键在查询的时候会将最后一个遇到键的值当作有效值。

JSONB数据类型则是以二进制格式来存储用户JSON格式数据，不会保存JSON数据中语义无关的空格，也不会保存用户JSON格式数据中对象键的顺序。对于用户输入JSON对象中具有重复键的情况，不保存重复键的对象，如果有重复键输入的话，只有最后一个值会被保存下来。

在大部分场景下，建议业务上应该使用JSONB类型来存储JSON数据，除非有特殊的需求，比如需要保留原来数据的顺序等。

