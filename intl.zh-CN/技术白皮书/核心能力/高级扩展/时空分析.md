# 时空分析

空间/时空数据（Spatial/Spatio-temproal Data，以下统称时空数据）是带有时间/空间位置信息的图形图像数据，用来表示事物的位置、形态、变化及大小分布等多维信息。

早期业内按矢量/栅格二元分类方法来划分时空数据，并在3S等传统行业默默发挥其“位置服务”作用，未能破圈；近年来伴随物联网智能终端在各领域渗透落地，会源源不断生产一种新的感知型时空数据，这类时空数据的应用价值从单一的“位置服务”拓展到多维联合分析/时空模式挖掘等交叉方向，大有“无位置不智能”之架势演化。

## 时空数据分类

-   传统空间型：矢量数据如电子地图、DEM高程模型数据等。
-   栅格型：遥感影像、全景影像等。
-   感知型：智能终端感知位置数据、激光点云等。

## 时空模型分类

-   几何模型：遵循OpenGIS规范，分为2D（X，Y）、3D（X，Y，Z）、4D（X，Y，Z，M）等Geometry类型。
-   栅格模型：栅格模型由按行和列（或格网）组织的像元（或像素）矩阵组成，每个像元都包含一个信息值（例如温度），栅格数据可以是数字航空像片、卫星影像、数字图片或甚至扫描的地图。
-   轨迹模型：轨迹数据是针对移动对象（Moving Feature）所记录的连续位置变化信息，例如车辆的轨迹、人的轨迹等。

## 应用场景

-   商业场景
    -   商业选址，人流和人口分布特征分析；
    -   配送人员跟踪/打卡，配送轨迹/路径分析；
    -   LBS消息推送，LBS广告推送；
    -   消费者分析，消费区域、空间关联分析。
-   交通场景
    -   公共交通、互联网出行、智慧物流等实时定位服务；
    -   不同路段/路口交通流统计，人流/车流分析与预测，ETA到达时间预估；
    -   车辆起始地/目的地聚合分析；
    -   车辆监控，车辆调度/派单优化；
    -   轨迹匹配，相似轨迹/路径分析；
    -   运力分布/分析，移动目标实时运行热力图；
    -   动态电子围栏管理，电子围栏监控与告警。
-   公共安全场景
    -   特殊人群跟踪，儿童监护；
    -   特殊车辆追踪、异常车辆识别；
    -   警报推送，危险提醒；
    -   健康码行程监控与管理。
-   自动驾驶场景
    -   激光点云存储、检索、分析、时空模式发现；
    -   高精度轨迹匹配，局部路径规划；
    -   高精地图生产与存储管理。

## AnalyticDB PostgreSQL版中的时空引擎

AnalyticDB PostgreSQL版提供两种扩展模块用于对空间/时空数据进行高效的存储、索引、查询和分析计算。

-   PostGIS：社区开源的空间引擎方案
-   Ganos：基于PostgreSQL生态自研的时空引擎方案

|类别|功能/性能对比|
|--|-------|
|PostGIS|-   支持几何模型，完全遵循OpenGIS规范，提供空间几何对象、空间几何索引、空间几何操作函数和空间几何操作符等丰富功能；
-   支持栅格模型，提供部分栅格操作函数和操作符；
-   不支持轨迹模型。 |
|Ganos|-   支持几何模型，完全兼容PostGIS几何模型接口，支持已有应用平滑迁移；性能与PostGIS无差别；
-   支持栅格模型，提供较为丰富的栅格数据管理和分析计算的函数，支持OSS数据源；性能优于PostGIS；
-   支持轨迹模型，提供一组数据类型，函数和存储过程，帮助用户高效管理、查询和分析时空轨迹数据。 |

具体优势如下：

-   易用性强，双引擎可平滑切换，数据零调整可从单机PostgreSQL迁移到AnalyticDB PostgreSQL版；
-   性价比高，基于MPP并行计算架构，相同性能指标和计算资源，AnalyticDB PostgreSQL版处理的时空数据体量远大于单机PostgreSQL；集成OSS，冷热数据分层管理，尤其对栅格数据/激光点云的存储和计算，可保证性能不降成本可降。

