# 实例规格及选型指导 {#concept_mp2_hbr_52b .concept}

## 规格定义 {#section_j3w_5fj_rhb .section}

目前AnalyticDB for PostgreSQL支持如下两种实例规格：

-   高性能

    规格简称为*n***x***m***C****SSD**，*n*代表单分区（segment）分配的CPU核数，*m*代表该计算组的总分区数，规格全称以 **gpdb.group.segsdx**开始。特点是可以提供更好的 I/O能力，带来更高的分析性能。

-   高容量

    规格简称为*n***x***m***C****HDD**，*n*代表单分区（segment）分配的CPU核数，*m*代表该计算组的总分区数，规格全称以**gpdb.group.seghdx**开始。特点是可以提供更大、更实惠的空间，满足更高的存储需求。


在选择实例规格时，建议您根据需要的存储空间和计算能力进行选择。同时，AnalyticDB for PostgreSQL支持基于 OSS的外部表扩展，并可通过gzip实现外部存储上的数据压缩，将不需要参与实时计算的数据可以存放到外部存储以进一步节省存储成本。

## 规格详情 {#section_ktk_bgj_rhb .section}

高性能实例的规格信息如下表所示。

|【高性能】计算组规格简称|【高性能】计算组规格全称|CPU|内存| 存储空间

 |规格说明|
|:-----------|:-----------|:--|:-|:-------|:---|
|1x1C SSD|gpdb.group.segsdx1|1 Core|8 GB|80 GB SSD|1个数据分区（segment），每个分区1CPU核。|
|1x2C SSD|gpdb.group.segsdx2|2 Cores|16 GB|160 GB SSD|2个数据分区（segment），每个分区1CPU核。|
|1x16C SSD|gpdb.group.segsdx16|16 Cores|128 GB|1.28 TB SSD|16个数据分区（segment），每个分区1CPU核。|
|4x4C SSD （高并发场景规格）|gpdb.group.segsd4cx4|16 Cores|128 GB|1.28 TB SSD|4个数据分区（segment），每个分区4CPU核。|

**说明：** **4x4CSSD**适用于高并发执行场景，建议简单查询（2表关联或单表查询）20并发执行以上场景或复杂查询（3表以上关联）10并发执行以上场景，采用该计算组规格。

高容量型实例的规格信息如下表所示：

|【高容量】计算组规格简称|【高容量】计算组规格全称|CPU|内存| 存储空间

 |规格说明|
|:-----------|:-----------|:--|:-|:-------|:---|
|2x2 HDD|gpdb.group.seghdx4|4 Cores|32 GB|2 TB HDD|2个数据分区（segment），每个分区2CPU核。|
|2x18 HDD|gpdb.group.seghdx36|36 Cores|288 GB|18 TB HDD|18个数据分区（segment），每个分区2CPU核。|

关于产品价格，请参考[产品定价](../../../../intl.zh-CN/产品定价/产品定价.md#)。

## 规格选型 {#section_xsx_3gj_rhb .section}

在云数据库AnalyticDB for PostgreSQL中创建实例和升级实例规格时，您需要选择计算组规格和计算组数量。

**说明：** 关于计算组规格和计算组数量的定义，请参考[名词解释](intl.zh-CN/产品简介/名词解释.md#)。

对于性能优先类场景，建议以SSD高性能规格构建分析数据仓库实例；对于以数据存储类优先的场景，可以考虑 HDD高容量规格。AnalyticDB for PostgreSQL采用MPP全对等并行架构，数据处理能力随计算组增加线性增长，保证相同的响应RT时间。如下图所示，对于不同数据量，随着计算组数量增加，可以保证同样查询的相同执行时间。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/16835/155781914246787_zh-CN.png)

**选型场景：**

集群规格选型可以参照原始数据量及应用场景，选择合适的计算组数量，构建MPP分析集群实例。

-   有一定并发度的简单查询场景，或者有较多数据更新操作的业务 （INSERT/UPDATE/DELETE ），建议采用行存储。

    假设原始数据为1TB，写入数据库后考虑索引等因素，数据大小一般还是在1TB左右，考虑到计算过程中会产生临时文件，日志等，建议按2TB的物理存储空间来规划集群实例的计算组数量。如果查询性能要求较高，可以增加计算组数量，从而增加对应的CPU，内存等资源，提升查询性能。

-   批处理ETL场景，其数据一般较少被更新（UPDATE/DELETE），同时查询以全表数据聚合关联为主，可以采用列存储。

    列存储具备2-5倍的高压缩比，对于1TB原始数据，入库后数据库存储在0.5TB以内，建议按1TB的物理存储空间来规划集群实例的计算组数量。


**示例：**

对于5TB的原始数据，针对高性能分析场景，并有100并发以上的查询，建议采用8个4x4C SSD计算组规格，总计11.24TB物理空间。

**说明：** [产品定价](https://www.aliyun.com/price/product#/gpdb/detail)中已经提供了一些常用计算组集群规格组合速查表。对于超过控制台自助创建页面的计算组数量，您可以通过提交工单或联系销售代表申请创建。

