# 如何选择实例规格？ {#concept_unc_jhg_v2b .concept}

在云数据库 AnalyticDB for PostgreSQL 中创建实例和升级实例规格时，您都需要选择[计算组规格](../../../../intl.zh-CN/产品简介/名词解释.md#) 和[计算组数量](../../../../intl.zh-CN/产品简介/名词解释.md#) 。目前，AnalyticDB for PostgreSQL 支持多种计算组规格，详情参见[规格总览](../../../../intl.zh-CN/产品简介/实例规格及选型指导.md#)。每种计算组规格可以选择不同的计算组数量，具体可参见 [规格组合速查表](https://www.aliyun.com/price/product#/gpdb/detail)。

您在选择计算组规格和计算组数量的时候，需要考虑下面两个因素：

-   所需要的存储空间
-   所需要的计算能力

## 存储空间 {#section_wyq_xhg_v2b .section}

每种计算组规格和计算组数量组合对应的存储空间 = 计算组规格的存储空间 \* 计算组数量

在选择需要的存储空间时，需要注意以下几点：

-   建议数据库的数据存储空间，不要大于实例物理存储空间的80%。因为在数据处理的过程中，会产生一些日志文件和临时文件。
-   对于高并发的点查询业务，或者有较多更新操作 （UPDATE/DELETE），建议数据采用行存储。行存储压缩率低，假设为1TB原始数据，入库后还是 1TB，建议规划 2TB的物理存储空间。
-   对于批处理ETL场景业务，以全表的聚合关联分析为主，建议数据采用列存储，列存储压缩率至少1倍以上。假设1TB原始数据，那么入库后数据约0.5TB以下，建议规划 1TB 的物理存储空间。
-   合理选取分布键，尽量避免数据倾斜。分布键选择应该尽量平均，否则容易造成数据倾斜。数据倾斜会使某个计算组存储空间耗尽，而其他计算组存储空间空闲，存储资源利用率较低。

## 计算能力 {#section_yyq_xhg_v2b .section}

每种计算组规格和计算组数量组合对应相应计算能力。计算能力取决于其计算组规格类型、CPU个数、内存大小和计算组数量。

目前，AnalyticDB for PostgreSQL 提供两类规格：

-   高性能规格，简称为**N x M C SSD**，**N**代表单分区（segment）分配的CPU核数，**M**代表该计算组的总分区数，规格全称以 gpdb.group.segsdx 开始，特点是可以提供更好的 I/O 能力，带来更高的性能。
-   高容量规格，简称为**N x M HDD**，**N**代表单分区（segment）分配的CPU核数，**M**代表该计算组的总分区数，规格全称以 gpdb.group.seghdx开始，，特点是可以提供更大、更实惠的空间，满足更高的存储需求。

对于高并发执行场景，即简单查询（2表关联或单表查询）20并发执行以上场景，或复杂查询（3表以上关联）10并发执行以上），建议选择 **4x4C SSD**规格，其单分区分配4个CPU核，可以支持同时并发执行较多计算任务。

除了计算组规格类型之外，增加计算组数量，可以线性扩展分析计算和存储能力。以高性能规格为例，下面三种情况，SQL 执行时间基本相近：

![](http://git.cn-hangzhou.oss.aliyun-inc.com/uploads/rds_pg/hybriddb_document/5e34ee137194ab531f3969a50ff52c45/image.png)

另外，您还要考虑每种计算组规格和计算组数量组合对应的价格，详见 [产品定价信息](https://www.aliyun.com/price/product#/gpdb/detail)。

