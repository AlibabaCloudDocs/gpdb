# 扩容实例规格

在使用AnalyticDB PostgreSQL版过程中，随着您的数据量和计算量的动态增长，一些计算资源如CPU、磁盘、内存以及数据处理节点数量将成为数据处理速度的瓶颈。为了支持实例的动态扩展，AnalyticDB PostgreSQL版提供在线扩容实例规格的功能，本文介绍了扩容实例规格的相关操作。

AnalyticDB PostgreSQL版实例规格包括**Master节点数量**、**计算节点规格**和**计算节点存储容量**，并支持对这三种规格进行扩容。各种计算节点规格详细说明见[规格及选型](/cn.zh-CN/规格和定价/规格及选型.md) 。

## 扩容计算节点

1.  登录[云原生数据仓库AnalyticDB PostgreSQL版管理控制台](https://gpdbnext.console.aliyun.com/gpdb/cn-hangzhou/list)。
2.  选择要操作实例所在的地域。例如，华东1。
3.  单击列表中的实例名称，进入基本信息页面。

    配置信息中显示了当前的实例规格，包括**Master节点数量**，**计算节点规格**，**计算节点数据量**。

    AnalyticDB PostgreSQL版目前提供两类规格：

    -   高性能，规格名称以高性能SSD开始，基于 SSD存储，提供更好的I/O能力，带来更高的性能。
    -   高容量，规格名称以大存储HDD开始，基于HDD存储，提供更大、更实惠的空间，满足更高的存储需要。
    **说明：** 原规格定义模式计算组规格、计算组详情、计算组数量等也会一同显示。

4.  单击**新增Segment节点**，选择合适的计算节点数量，勾选服务协议，单击**立即购买**，实现对计算节点数量的扩容。
5.  单击**Segment磁盘扩容**，选择合适的计算节点存储容量，勾选服务协议，单击**立即购买**，实现对计算节点存储容量的扩容。

    目前，AnalyticDB PostgreSQL版支持不同的计算节点规格和计算节点数量组合，详情参见[规则组合速查表](https://www.aliyun.com/price/product#/gpdb/detail)。在选择新的计算节点规格和计算节点数量组合时，要满足以下约束：

    -   新旧计算节点规格必须为同一存储类型节点规格，而且新的计算节点规格≥旧的计算节点规格
    -   如果新的计算节点规格=旧的计算节点规格，新的计算节点数量\>旧的计算节点数量
    在选择计算节点规格和计算节点数量的时候，除了满足以上约束，您还需要对自己的数据量和计算量进行评估，从而选择合适的计算节点规格和计算节点数量组合，详情可参考[如何选择实例规格](/cn.zh-CN/常见问题/如何选择实例规格？.md) 。

    **说明：** 根据您数据量的不同，实例规格升级的过程大约需要至少30分钟到数十个小时不等，与表数量、分区表数量、索引数量、是否压缩、总数据量、实例规格等因素相关。在此过程中，为了保证数据的一致性，您实例只对外提供只读服务，并且会闪断两次，请您提前做出调整。当升级实例规格结束，对应实例恢复运行中状态，您可以正常访问数据库，而且实例的数据库内核版本自动升级为最新。


在完成了上述操作之后，您可以回到控制台，查看目标实例的运行状态。如果计算节点扩缩容操作完成，则实例运行状态为**运行中**，否则为**升降级中**。

## 新增/减少Master节点

1.  登录[云原生数据仓库AnalyticDB PostgreSQL版管理控制台](https://gpdbnext.console.aliyun.com/gpdb/cn-hangzhou/list)。
2.  选择要操作实例所在的地域。例如，华东1。
3.  单击目标实例右侧操作栏中的**新增Master节点**或者**减少Master节点**。
4.  选择合适的Master节点数量，勾选服务协议，单击**立即购买**。

在完成了上述操作之后，您可以回到控制台，查看目标实例的运行状态。如果Master节点扩缩容操作完成，则实例运行状态为**运行中**，否则为**扩容中**。

