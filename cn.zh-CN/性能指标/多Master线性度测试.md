# 多Master线性度测试

## TPC-C测试

-   测试实例：，弹性存储实例，4C32G 计算节点配置，计算节点个数为32个，存储类型为ESSD。
-   测试方式：在上述测试实例下，将Master数量从1逐渐增加到4，观察TPC-C的性能变化。具体TPC-C的信息及测试方法可以参考[TPC-C](/cn.zh-CN/性能指标/TPC-C.md)。
-   多Master线性度数据测试结果：

    |Master个数|性能（tpmC）|扩展比|
    |--------|--------|---|
    |1 （64并发）|19975.27|1 （100%）|
    |2（128并发）|39349.72|1.97 （98.5%）|
    |3 （192并发）|58606.68|2.93 （97.8%）|
    |4 （256并发）|79826.89|3.996 （99.9%）|

    对比相同计算节点配置下的单Master在不同并发数下性能数据如下：

    |并发数|性能（tpmC）|
    |---|--------|
    |1|696.253234|
    |8|9421.58|
    |16|16045.81|
    |32|19315.04|
    |64|19808.72|
    |128|19142.56|

    由此可见，在相同计算节点配置下，TPC-C性能可以随着Master数量及并发数的增加而线性增长。


## TPC-B测试

-   测试实例：，弹性存储实例，4C32G 计算节点配置，计算节点个数为32个，存储类型为ESSD。
-   测试方式：在上述测试实例下，将Master数量从1逐渐增加到4，观察TPC-B的性能变化。具体TPC-B的信息及测试方法可以参考[TPC-B](/cn.zh-CN/性能指标/TPC-B.md)。

-   **TPC-B**

    多Master线性度数据：

    |master个数|性能（tps）|扩展比|
    |--------|-------|---|
    |1 （64并发）|3726.414536|1 （100%）|
    |2 （128并发）|7420.330380|1.99 （99.6%）|
    |3 （196并发）|11074.404963|2.97 （99.1%）|
    |4（256并发）|14569.240161|3.91 （97.7%）|

    对比相同计算节点配置下的单Master在不同并发数下的性能数据如下：

    |并发数|性能（tps）|
    |---|-------|
    |1|144.814643|
    |8|1143.098047|
    |16|2146.930340|
    |32|3246.044723|
    |64|3668.369726|
    |128|3658.159183|

-   **TPC-B（Select-Only）**

    多Master线性度数据：

    |master 个数|性能|扩展比|
    |---------|--|---|
    |1 （64并发）|22815.6 tps （EC mode）|1 （100%）|
    |2 （128并发）|44275 tps|1.94 （97%）|
    |3 （192并发）|64639.7 tps|2.83 （94%）|
    |4 （256并发）|85310.2 tps|3.74 （93.5%）|

    对比相同计算节点配置下的单Master在不同并发数下的性能数据如下：

    |并发数|性能（tps）|
    |---|-------|
    |1|1125.090283|
    |8|8552.457660|
    |16|14874.467761|
    |32|20708.188841|
    |64|22496.637455|
    |128|22043.953276|

-   **TPC-B（Insert-Only）**

    多Master线性度数据：

    |master个数|性能|扩展比|
    |--------|--|---|
    |1 （64并发）|23626.0 tps （EC mode）|1 （100%）|
    |2（128并发）|45868.2 tps|1.94 （97%）|
    |3 （192并发）|64639.7 tps|2.74 （91.3%）|
    |4 （256并发）|84871.9 tps|3.60 （90%）|

    **说明：** 在该模式下4个Master节点时出现线性度下降主要是因为底层计算节点及ESSD存储在当前规格下出现存储带宽瓶颈，后续将进一步开放不同计算节点规格的配置来提升存储性能。

    对比相同计算节点配置下的单Master在不同并发数下的性能数据如下：

    |并发数|性能（tps）|
    |---|-------|
    |1|696.253234|
    |8|5770.611358|
    |16|11277.564613|
    |32|19579.718539|
    |64|23534.760806|
    |128|23394.270989|

    由上述测试可见，在相同计算节点配置下，TPC-B性能可以随着Master数量及并发数的增加而线性增长。


